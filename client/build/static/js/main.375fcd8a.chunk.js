(this["webpackJsonpfb-comment-tracking"]=this["webpackJsonpfb-comment-tracking"]||[]).push([[0],{176:function(e,t,n){},255:function(e,t,n){},434:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),s=n(37),i=n.n(s),o=(n(255),n(438)),l=n(242),j=n(47),u=n(75),d=n(451),m=(n(176),n(211)),h=n(50),b=n(22),x=n(446),O=n(114),f=n(69),g=n(441),p=n(443),y=n(444),v=n(458),k=n(459),T=n(460),C=n(462),I=n(461),w=n(457),S=n(456),D=n(455),_=n(452),M=n(168),Y=n(12),F=n.n(Y),P=n(8),N=n.n(P),E=n(124),A=n(246),U=n(247),q=n(73),H=n(449),L=n(436),V=n(439),B=n(442),z=n(445),G=n(135);function K(e){var t=e.typeExport,n=e.countExport,c=e.comments;if(n&&t){var r=[];switch(t){case"full_csv":r=N.a.reduce(c,(function(e,t,a){if(a>=n)return e;var c=N.a.map(N.a.get(t,"contents.phoneNumbers",[]),(function(e){return e})).join("\n");N.a.get(t,"from.mobile_phone")&&(c+="\n"+N.a.get(t,"from.mobile_phone"));var r=F()(t.createdTime).format("DD/MM/YYYY \n HH:mm ");return e.push([r,N.a.get(t,"post.postId",""),N.a.get(t,"from.id",""),N.a.get(t,"from.name",""),N.a.get(t,"contents.message",""),c,N.a.get(t,"note","")]),e}),[["Th\u1eddi gian","PostId","UID","Name","Comment","SDT","Note"]]);break;case"only_uid_name_csv":r=N.a.reduce(c,(function(e,t,a){if(a>=n)return e;var c=N.a.map(N.a.get(t,"contents.phoneNumbers",[]),(function(e){return e})).join("\n");return N.a.get(t,"from.mobile_phone")&&(c+="\n"+N.a.get(t,"from.mobile_phone")),e.push([N.a.get(t,"from.id",""),N.a.get(t,"from.name",""),N.a.get(t,"contents.message",""),c]),e}),[["UID","Name","Comment","Name"]])}return Object(a.jsxs)(G.CSVLink,{data:r,target:"_blank",filename:"comment_".concat(F()().format("MM:ss_DD-MM-YYYY"),".csv"),style:{color:"white"},children:[" ","T\u1ea3i v\u1ec1"]})}return Object(a.jsx)(a.Fragment,{})}var X=n(169),Q=n.n(X),R=n(212),W=n(213),J={restAPIServer:"http://hotdatafb.com/api"},$=n.n(W).a.create({baseURL:J.restAPIServer});$.interceptors.request.use(function(){var e=Object(R.a)(Q.a.mark((function e(t){var n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=localStorage.getItem("access_token"))&&(t.headers={Authorization:"Bearer ".concat(n)}),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)}));var Z=$,ee=function(e){return A.a.error({message:N.a.get(e,"response.data.msg",e.message)})},te=n(454),ne=n(453);function ae(e){var t="";return{filterDropdown:function(e){var n=e.setSelectedKeys,c=e.selectedKeys,r=e.confirm,s=e.clearFilters;return Object(a.jsxs)("div",{style:{padding:8},children:[Object(a.jsx)(z.a,{ref:function(e){t=e},placeholder:"T\xecm b\u1ea5t c\u1ee9 th\u1ee9 g\xec b\u1ea1n mu\u1ed1n",value:c[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return r()},style:{width:188,marginBottom:8,display:"block"}}),Object(a.jsxs)(te.b,{children:[Object(a.jsx)(j.a,{type:"primary",onClick:function(){return r()},icon:Object(a.jsx)(ne.a,{}),size:"small",style:{width:90},children:"T\xecm"}),Object(a.jsx)(j.a,{onClick:function(){return s()},size:"small",style:{width:90},children:"\u0110\u1eb7t l\u1ea1i"})]})]})},filterIcon:function(e){return Object(a.jsx)(ne.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){var a=N.a.map(e,(function(e){return N.a.get(n,e,"")})).join("\t");return console.log(a),a.toLowerCase().includes(t.trim().toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return t.select()}),1e3)}}}var ce=n(84),re=E.a.Option;var se=n(38);function ie(e){var t=e.isShowModal,n=e.setShowModal,r=Object(c.useState)([]),s=Object(b.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)(!1),j=Object(b.a)(l,2),u=j[0],d=j[1],m=Object(se.f)();return Object(a.jsx)(y.a,{title:"T\u1ea1o danh m\u1ee5c m\u1edbi",visible:t,onOk:function(){var e=Object(b.a)(i,3),t=e[0],a=e[1],c=e[2];t&&""!==t.value&&(d(!0),Z.post("/category",{name:t.value,description:a.value,status:c.value?"deactive":"active"}).then((function(e){A.a.success({message:"\u0110\xe3 t\u1ea1o danh m\u1ee5c "}),m.replace("/category-manager"),window.location.reload(),n(!1)})).catch((function(e){A.a.error({message:e.message})})).finally((function(){d(!1)})))},okText:"T\u1ea1o",cancelText:"\u0110\xf3ng",confirmLoading:u,onCancel:function(){return n(!1)},children:Object(a.jsxs)(B.a,{layout:"vertical",validateMessages:{required:"${label} kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"},onFieldsChange:function(e,t){o(t)},children:[Object(a.jsx)(B.a.Item,{name:["category","name"],label:"T\xean danh m\u1ee5c ",rules:[{required:!0}],children:Object(a.jsx)(z.a,{})}),Object(a.jsx)(B.a.Item,{name:["category","description"],label:"Mi\xeau t\u1ea3 ",children:Object(a.jsx)(z.a.TextArea,{})}),Object(a.jsx)(B.a.Item,{name:["category","status"],label:"Ho\u1ea1t \u0111\u1ed9ng ",children:Object(a.jsx)(H.a,{defaultChecked:!0})})]})})}function oe(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],r=t[1],s=function(){r(!0),Z.get("/category").then((function(e){u(e.data)})).catch(ee).finally((function(){r(!1)}))};Object(c.useEffect)((function(){s()}),[]);var i=Object(c.useState)([]),o=Object(b.a)(i,2),l=o[0],u=o[1],d=[{title:"Th\u1eddi gian t\u1ea1o",dataIndex:"createdAt",key:"createdAt",sorter:function(e,t){return F()(e.createdAt).unix()-F()(t.createdAt).unix()},render:function(e){return F()(e).format("DD/MM/YYYY \n HH:mm ")}},{title:"T\xean danh m\u1ee5c",dataIndex:"name",key:"name",render:function(e){return Object(a.jsx)("p",{children:e})},sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"Mi\xeau t\u1ea3",dataIndex:"description",key:"description",sorter:function(e,t){return e.name.localeCompare(t.name)}},{title:"T\u1ed5ng b\xe0i vi\u1ebft",dataIndex:"totalPost",key:"totalPost",sorter:function(e,t){return e.totalPost-t.totalPost},render:function(e){return Object(a.jsx)(U.a,{color:"cyan",children:e})}},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"status",filters:[{text:"Ho\u1ea1t \u0111\u1ed9ng",value:"active"},{text:"T\u1ea1m d\u1eebng",value:"deactive"}],filterMultiple:!1,onFilter:function(e,t){return N.a.isEqual(t.status,e)},key:"status"+Math.round(6*Math.random()),render:function(e,t){return console.log({status:e}),Object(a.jsx)(H.a,{defaultChecked:N.a.isEqual(e,"active"),onChange:function(e){return function(e,t){var n=e?"active":"deactive";Z.put("/category/".concat(t,"/").concat(n)).then((function(e){A.a.success({message:"\u0110\xe3 c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i !"})})).catch((function(e){return ee(e)}))}(e,t._id)}})}},{title:"H\xe0nh \u0111\u1ed9ng",dataIndex:"_id",key:"_id",render:function(e,t){return Object(a.jsxs)(a.Fragment,{children:[" ",Object(a.jsx)(L.a,{title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a \uff1f",okText:"X\xf3a",cancelText:"H\u1ee7y",onConfirm:function(){return t=e,void Z.delete("/category/".concat(t)).then((function(e){A.a.success({message:"\u0110\xe3 x\xf3a !"}),s()})).catch((function(e){return ee(e)}));var t},children:Object(a.jsx)(j.a,{type:"danger",shape:"round",icon:Object(a.jsx)(T.a,{}),size:"small",children:"X\xf3a"})})]})}}];return Object(a.jsx)(V.a,{columns:d,dataSource:l,loading:n})}var le=n(134),je=n(468),ue=n(450),de=n(469);function me(e){var t=e.comments,n=e.isLoading,c=e.setComments,r=(e.getComments,[{title:"STT",key:"index"+Math.random(),width:"20px",render:function(e,t,n){return console.log(n),n+1}},{title:"Th\u1eddi gian t\u1ea1o",dataIndex:"createdTime",width:"50px",key:"createdTime",sorter:function(e,t){return F()(e.createdTime).unix()-F()(t.createdTime).unix()},render:function(e){return F()(e).format("DD/MM/YYYY \n HH:mm ")}},Object(h.a)(Object(h.a)({title:"Page",dataIndex:"post",width:"200px"},ae(["post.from.id","post.from.name","post.postId","post.note"])),{},{key:"post",render:function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("b",{children:"ID: "})," ",Object(a.jsx)("a",{href:"https://fb.com/"+N.a.get(e,"from.id",""),target:"_blank",rel:"noreferrer",children:N.a.get(e,"from.id","")})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"T\xean: "})," ",Object(a.jsx)("span",{children:N.a.get(e,"from.name")})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Post: "})," ",Object(a.jsx)("a",{href:"https://fb.com/"+e.postId,target:"_blank",rel:"noreferrer",children:e.postId.split("_")[1]})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Ghi ch\xfa: "})," ",Object(a.jsxs)("span",{children:[" ",e.note]})," ",Object(a.jsx)("br",{})]})}}),Object(h.a)(Object(h.a)({title:"Th\xf4ng tin",dataIndex:"from"},ae(["from.id","from.name","from.mobile_phone","from.location.0.name"])),{},{width:"200px",key:"from",render:function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("b",{children:"UID: "})," ",Object(a.jsx)("a",{href:"https://fb.com/"+e.id,target:"_blank",rel:"noreferrer",children:e.id})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"T\xean: "}),Object(a.jsx)("span",{children:N.a.get(e,"name")})," ","male"===e.gender?Object(a.jsxs)(U.a,{color:"cyan",children:[Object(a.jsx)(d.a,{})," Nam"]}):Object(a.jsx)(a.Fragment,{}),"female"===e.gender?Object(a.jsxs)(U.a,{color:"geekblue",children:[Object(a.jsx)(d.a,{})," N\u1eef"]}):Object(a.jsx)(a.Fragment,{}),Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Phone: "})," ",e.mobile_phone?Object(a.jsxs)(U.a,{color:"cyan",children:[Object(a.jsx)(D.a,{})," ",e.mobile_phone.replace("+84","0")]}):Object(a.jsx)(a.Fragment,{})," ",Object(a.jsx)("br",{}),N.a.map(N.a.get(t,"contents.phoneNumbers",[]),(function(e){return Object(a.jsxs)(U.a,{color:"cyan",children:[Object(a.jsx)(D.a,{})," ",e]})})),Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Khu v\u1ef1c: "})," ",Object(a.jsxs)("span",{children:[" ",N.a.get(e,"location.0.name","\u0110ang c\u1eadp nh\u1eadt...")]})," ",Object(a.jsx)("br",{})]})}}),Object(h.a)(Object(h.a)({title:"B\xecnh lu\u1eadn",dataIndex:"contents",key:"contents",width:"200px"},ae(["contents.message"])),{},{render:function(e){return Object(a.jsx)("p",{children:e.message})}}),Object(h.a)(Object(h.a)({title:"Ghi ch\xfa",dataIndex:"note",key:"note",width:"20%"},ae(["note"])),{},{render:function(e,n){return Object(a.jsx)(z.a.TextArea,{rows:4,placeholder:"Nh\u1eadp ghi ch\xfa...",defaultValue:e,cols:"10",style:{resize:"vertical",minWidth:"200px",width:"100%"},onMouseLeave:function(e){var a=N.a.get(e,"target.value","");N.a.get(n,"note","")!==a&&function(e,n){Z.put("/comment/".concat(e,"/note"),{note:n}).then((function(a){A.a.success({message:"\u0110\xe3 l\u01b0u"}),N.a.find(t,(function(t){return N.a.isEqual(t._id,e)})).note=n,c(t)})).catch(ee)}(n._id,a)}})}}),{title:"H\xe0nh \u0111\u1ed9ng",dataIndex:"_id",key:"_id",width:"50px",render:function(e,n){return Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(a.jsx)(H.a,{checkedChildren:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(k.a,{})," ",Object(a.jsx)("span",{children:"Xem"})]}),unCheckedChildren:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"Ch\u01b0a"})," ",Object(a.jsx)(ue.a,{})," "]}),style:{marginBottom:10},defaultChecked:n.isView,onChange:function(e){return function(e,t){var n=e?"active":"deactive";Z.put("/comment/".concat(t,"/").concat(n)).then((function(){c((function(n,a){return N.a.map(n,(function(n){return N.a.isEqual(n._id,t)&&(n.isView=e),n}))}))})).catch((function(e){return ee(e)}))}(e,n._id)}},e),Object(a.jsx)(j.a,{type:"default",size:"small",shape:"round",icon:Object(a.jsx)(de.a,{}),style:{marginBottom:10,backgroundColor:"#20bf6b"},children:Object(a.jsxs)("a",{href:"https://fb.com/"+n.commentId,target:"_blank",rel:"noreferrer",style:{color:"white"},children:[" ","Xem"]})}),Object(a.jsx)(L.a,{title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a \uff1f",okText:"X\xf3a",cancelText:"H\u1ee7y",onConfirm:function(){return n=e,void Z.delete("/comment/".concat(n)).then((function(e){A.a.success({message:"\u0110\xe3 x\xf3a !"});var a=N.a.remove(t,(function(e){return!N.a.isEqual(e._id,n)}));c(a)})).catch((function(e){return ee(e)}));var n},children:Object(a.jsx)(j.a,{type:"danger",size:"small",shape:"round",icon:Object(a.jsx)(T.a,{}),children:"X\xf3a"})})]})}}]);return Object(a.jsx)(V.a,{dataSource:t,loading:n,columns:r,rowClassName:function(e){if(e.isView)return"row-hightlight"}})}var he=n(440),be=n(222),xe=n(447),Oe=n(437),fe=n(448),ge=he.a.RangePicker,pe=E.a.Option;function ye(e){Object(c.useEffect)((function(){ve(),Z.get("/category").then((function(e){s(e.data)})).catch(ee),Z.get("/post").then((function(e){u(N.a.groupBy(e.data,"from.id"))})).catch(ee),N.a.get(e,"match.params.postId")&&function(){var t=N.a.get(e,"match.params.postId");Z.get("/post/"+t).then((function(e){he(e.data)})).catch(ee)}()}),[]);var t=Object(c.useState)([]),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)([]),o=Object(b.a)(i,2),l=o[0],u=o[1],d=Object(c.useState)(),m=Object(b.a)(d,2),h=m[0],g=m[1],p=Object(c.useState)(),k=Object(b.a)(p,2),T=k[0],C=k[1],I=Object(c.useState)([F()().startOf("day"),F()().endOf("day")]),w=Object(b.a)(I,2),S=w[0],D=w[1],_=Object(c.useState)(!0),M=Object(b.a)(_,2),Y=M[0],P=M[1],A=Object(c.useState)(!0),U=Object(b.a)(A,2),q=U[0],H=U[1],L=Object(c.useState)(!1),V=Object(b.a)(L,2),z=V[0],K=V[1],X=Object(c.useState)([]),Q=Object(b.a)(X,2),R=Q[0],W=Q[1],J=Object(c.useState)(!1),$=Object(b.a)(J,2),te=$[0],ae=$[1],ce=Object(c.useState)({typeExport:"full_csv",countExport:N.a.get(R,"length",0)}),re=Object(b.a)(ce,2),se=re[0],ie=re[1],oe=Object(c.useState)(),ue=Object(b.a)(oe,2),de=ue[0],he=ue[1],ye=function(){var e=se.typeExport,t=se.countExport;if(t&&e){var n=[];switch(e){case"full_csv":n=N.a.reduce(R,(function(e,n,a){if(a>=t)return e;var c=N.a.map(N.a.get(n,"contents.phoneNumbers",[]),(function(e){return e})).join("\n");N.a.get(n,"from.mobile_phone")&&(c+="\n"+N.a.get(n,"from.mobile_phone"));var r=F()(n.createdTime).format("DD/MM/YYYY \n HH:mm ");return e.push([r,N.a.get(n,"post.postId",""),N.a.get(n,"from.id",""),N.a.get(n,"from.name",""),N.a.get(n,"contents.message",""),c,N.a.get(n,"note","")]),e}),[["Th\u1eddi gian","PostId","UID","Name","Comment","SDT","Note"]]);break;case"only_uid_name_csv":n=N.a.reduce(R,(function(e,n,a){if(a>=t)return e;var c=N.a.map(N.a.get(n,"contents.phoneNumbers",[]),(function(e){return e})).join("\n");return N.a.get(n,"from.mobile_phone")&&(c+="\n"+N.a.get(n,"from.mobile_phone")),e.push([N.a.get(n,"from.id",""),N.a.get(n,"from.name",""),N.a.get(n,"contents.message",""),c]),e}),[["UID","Name","Comment","Name"]])}return Object(a.jsxs)(G.CSVLink,{data:n,target:"_blank",filename:"comment_".concat(F()().format("MM:ss_DD-MM-YYYY"),".csv"),style:{color:"white"},children:[" ","T\u1ea3i xu\u1ed1ng"]})}return Object(a.jsx)(a.Fragment,{})},ve=function(){var t="all"===h?null:h,n="all"===T?null:T,a=Object(b.a)(S,2),c=a[0],r=a[1];H(!0),Z.get("/comments",{params:{categoryId:t,from:n,postId:N.a.get(e,"match.params.postId"),startDate:c.toDate(),endDate:r.toDate()}}).then((function(e){W(e.data)})).finally((function(){H(!1)}))},ke=function(e){var t=e.postInfo;return Object(a.jsx)(be.a,{content:Object(a.jsxs)("div",{children:[N.a.get(t.content,"pictures.0")?Object(a.jsx)("img",{src:t.content.pictures[0],width:100,alt:"image "}):Object(a.jsx)(a.Fragment,{})," ",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"ID Post: "})," ",Object(a.jsx)("a",{href:"https://fb.com/".concat(t.postId),target:"_blank",rel:"noreferrer",children:t.postId})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Chuy\xean m\u1ee5c: "})," ",Object(a.jsx)("a",{href:"https://fb.com/".concat(t.postId),target:"_blank",rel:"noreferrer",children:N.a.get(t,"category.name","Kh\xf4ng c\xf3")})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Ghi ch\xfa: "})," ",t.note," ",Object(a.jsx)("br",{})," ",Object(a.jsx)("br",{})]}),title:"Th\xf4ng tin b\xe0i vi\u1ebft",trigger:"hover",children:Object(a.jsx)(xe.a,{message:Object(a.jsxs)("p",{children:["B\u1ea1n \u0111ang xem b\xecnh lu\u1eadn c\u1ee7a b\xe0i vi\u1ebft c\xf3 ID:"," ",Object(a.jsx)("b",{children:t.postId})]}),type:"info"})})};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x.a,{className:"site-page-header",title:"Qu\u1ea3n l\xfd b\xecnh lu\u1eadn",subTitle:"T\u1ea5t c\u1ea3 b\xecnh lu\u1eadn qu\xe9t \u0111\u01b0\u1ee3c"}),Object(a.jsxs)(O.a,{style:{margin:"0 25px"},children:[de?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ke,{postInfo:de}),Object(a.jsx)(Oe.a,{})]}):Object(a.jsx)(a.Fragment,{}),Object(a.jsxs)("p",{children:["B\u1ea1n \u0111ang qu\xe9t t\u1ea5t c\u1ea3 comment t\u1eeb ng\xe0y \u0111\u1ebfn"," ",Object(a.jsxs)("b",{children:[" ",S[0].format("DD/MM/YYYY")," "]})," -"," ",Object(a.jsx)("b",{children:S[1].format("DD/MM/YYYY")})," "]}),Object(a.jsxs)(f.a,{span:24,style:{dislay:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(a.jsxs)(E.a,{placeholder:"Th\u1eddi gian",defaultValue:"today",style:{marginRight:20},onChange:function(e){switch(e){case"today":D([F()().startOf("day"),F()().endOf("day")]),P(!0);break;case"yesterday":D([F()().subtract(1,"day").startOf("day"),F()().subtract(1,"day").endOf("day")]),P(!0);break;case"week":D([F()().startOf("week"),F()().endOf("week")]),P(!0);break;case"lastWeek":D([F()().subtract(1,"week").startOf("week"),F()().subtract(1,"week").endOf("week")]),P(!0);break;case"month":D([F()().startOf("month"),F()().endOf("month")]),P(!0);break;default:P(!1)}},children:[Object(a.jsx)(pe,{value:"custom",children:"Tu\u1ef3 ch\u1ec9nh"}),Object(a.jsx)(pe,{value:"today",children:"H\xf4m nay"}),Object(a.jsx)(pe,{value:"yesterday",children:"H\xf4m qua"}),Object(a.jsx)(pe,{value:"week",children:"Tu\u1ea7n n\xe0y "}),Object(a.jsx)(pe,{value:"lastWeek",children:"Tu\u1ea7n tr\u01b0\u1edbc "}),Object(a.jsx)(pe,{value:"month",children:"Th\xe1ng n\xe0y "})]}),Y?Object(a.jsx)(a.Fragment,{}):Object(a.jsx)(ge,{format:"DD/MM/YYYY",defaultValue:S,onChange:function(e){return D(e)}}),N.a.get(e,"match.params.postId")?Object(a.jsx)(a.Fragment,{}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(E.a,{placeholder:"B\xe0i vi\u1ebft c\u1ee7a",showSearch:!0,defaultValue:"all",style:{margin:"0 20px",width:"200px"},onChange:C,children:[Object(a.jsx)(pe,{value:"all",children:"B\xe0i vi\u1ebft c\u1ee7a"}),N.a.map(l,(function(e,t){return Object(a.jsx)(pe,{value:t,children:N.a.get(e,"0.from.name","Unknown")},t)}))]}),Object(a.jsxs)(E.a,{placeholder:"Danh m\u1ee5c",defaultValue:"all",style:{marginRight:20,marginTop:20,width:"200px"},onChange:g,children:[Object(a.jsx)(pe,{value:"all",children:"T\u1ea5t c\u1ea3 danh m\u1ee5c"}),N.a.map(r,(function(e){return Object(a.jsx)(pe,{value:e._id,children:e.name},e._id)}))]})]}),Object(a.jsx)(j.a,{type:"primary",style:{marginLeft:10},onClick:function(){ve()},icon:Object(a.jsx)(ne.a,{}),disabled:q,children:"T\xecm"}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{float:"right",marginTop:30},children:[Object(a.jsxs)(j.a,{type:"primary",style:{marginRight:10},icon:Object(a.jsx)(je.a,{spin:z}),disabled:z||q,onClick:function(){K(!0),Z.get("/post/refresh-comments").then((function(e){ve()})).catch(ee).finally((function(){K(!1)}))},children:[" ",z?"\u0110ang l\xe0m m\u1edbi...":"L\xe0m m\u1edbi danh s\xe1ch"]}),Object(a.jsx)(j.a,{type:"primary",icon:Object(a.jsx)(v.a,{}),onClick:function(){return ae(!0)},children:"L\u01b0u v\u1ec1 m\xe1y"})]})]})]}),Object(a.jsx)(O.a,{children:Object(a.jsx)(f.a,{span:24,children:Object(a.jsx)(me,Object(le.a)({comments:R,getComments:ve,isLoading:q||z,setComments:W},"getComments",ve))})}),Object(a.jsx)(y.a,{title:"T\u1ea3i d\u1eef li\u1ec7u v\u1ec1 m\xe1y",visible:te,onCancel:function(){return ae(!1)},footer:[Object(a.jsx)(j.a,{onClick:function(){return ae(!1)},children:"\u0110\xf3ng"},"back"),Object(a.jsx)(j.a,{form:"formExportCSV",type:"primary",htmlType:"submit",icon:Object(a.jsx)(v.a,{}),children:Object(a.jsx)(ye,{})})],children:Object(a.jsxs)(B.a,{layout:"vertical",id:"formExportCSV",name:"basic",initialValues:{typeExport:"full_csv"},children:[Object(a.jsx)(B.a.Item,{name:"typeExport",label:"Ph\u1ea7n m\u1edf r\u1ed9ng",rules:[{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"}],children:Object(a.jsxs)(E.a,{onChange:function(e){ie({typeExport:e,countExport:N.a.get(se,"countExport")})},children:[Object(a.jsx)(pe,{value:"full_csv",children:"Full th\xf4ng tin (.csv)"}),Object(a.jsx)(pe,{value:"only_uid_name_csv",children:"Ch\u1ec9 Uid/name/phone/cmt (.csv)"})]})}),Object(a.jsx)(B.a.Item,{name:"countExport",label:"S\u1ed1 l\u01b0\u1ee3ng",rules:[{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"}],children:Object(a.jsx)(fe.a,{placeholder:"C\xf3 t\u1ea5t c\u1ea3 ".concat(R.length," comments c\xf3 th\u1ec3 t\u1ea3i v\u1ec1"),style:{width:"100%"},onChange:function(e){ie({countExport:e,typeExport:N.a.get(se,"typeExport")})}})})]})})]})}var ve=n(467),ke=n(125);var Te=function(e){var t=e.me,n=e.user,r=e.isShow,s=e.setShow,i=e.getUsers,o=Object(c.useState)(!1),l=Object(b.a)(o,2),u=l[0],d=l[1],m=B.a.useForm(),h=Object(b.a)(m,1)[0],x=n.username,O=n.status,f=n.fullName,g=n.limitPost,p=n.roles,v=n.expiresDate,k=[{name:["username"],value:x},{name:["active"],value:"active"===O},{name:["fullName"],value:f},{name:["limitPost"],value:g},{name:["roles"],value:p},{name:["expiresDate"],value:F()(v)}];return Object(a.jsx)(y.a,{title:"Ch\u1ec9nh s\u1eeda ng\u01b0\u1eddi d\xf9ng",visible:r,confirmLoading:u,onCancel:function(){h.resetFields(),s(!1)},footer:[Object(a.jsx)(j.a,{onClick:function(){h.resetFields(),s(!1)},children:"\u0110\xf3ng"},"back"),Object(a.jsx)(j.a,{form:"formCreateUser",type:"primary",htmlType:"submit",disabled:u,children:u?Object(a.jsxs)("p",{children:[Object(a.jsx)(_.a,{spin:!0})," Vui l\xf2ng \u0111\u1ee3i..."]}):"C\u1eadp nh\u1eadt"})],children:Object(a.jsxs)(B.a,{layout:"vertical",id:"formCreateUser",form:h,name:"basic",fields:k,onFinish:function(e){d(!0),Z.put("/user/"+n._id,e).then((function(e){i(),s(!1)})).catch((function(e){return ee(e)})).finally((function(){d(!1)}))},children:[Object(a.jsx)(B.a.Item,{name:"username",label:"Email \u0111\u0103ng nh\u1eadp",rules:[{type:"email",message:"Vui l\xf2ng \u0111i\u1ec1n email"},{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"}],value:n.username,children:Object(a.jsx)(z.a,{placeholde:"Username",disabled:!0})}),Object(a.jsx)(B.a.Item,{name:"fullName",label:"T\xean \u0111\u1ea7y \u0111\u1ee7",rules:[{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"},{min:6,message:"M\u1eadt kh\u1ea9u ph\u1ea3i t\u1ed1i thi\u1ec3u 6 k\xfd t\u1ef1"}],children:Object(a.jsx)(z.a,{placeholde:"T\xean \u0111\u1ea7y \u0111\u1ee7"})}),Object(a.jsx)(B.a.Item,{name:"password",label:"M\u1eadt kh\u1ea9u",children:Object(a.jsx)(z.a.Password,{placeholder:"\u0110i\u1ec1n tr\u1ed1ng \u0111\u1ec3 ko \u0111\u1ed5i m\u1eadt kh\u1ea9u"})}),Object(a.jsx)(B.a.Item,{name:"limitPost",label:"Gi\u1edbi h\u1ea1n post",rules:[{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"},function(){return{validator:function(e,t){return!t||t<5?Promise.reject("Gi\u1edbi h\u1ea1n post ph\u1ea3i l\u1edbn h\u01a1n 5 b\xe0i. "):Promise.resolve()}}}],children:Object(a.jsx)(fe.a,{placeholde:"Gi\u1edbi h\u1ea1n post"})}),Object(a.jsx)(B.a.Item,{name:"roles",label:"Quy\u1ec1n",rules:[{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"}],children:Object(a.jsx)(ke.a.Group,{children:N.a.get(t,"roles",[]).includes("admin")?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ke.a,{value:"super-user",children:"Super User"}),Object(a.jsx)(ke.a,{value:"admin",children:"Admin"}),Object(a.jsx)(ke.a,{value:"user",children:"Normal User"})]}):Object(a.jsx)(ke.a,{value:"user",checked:!0,children:"Normal User"})})}),Object(a.jsx)(B.a.Item,{name:"active",label:"Tr\u1ea1ng th\xe1i",children:Object(a.jsx)(H.a,{defaultChecked:!0})}),Object(a.jsx)(B.a.Item,{name:"expiresDate",label:"Ng\xe0y h\u1ebft h\u1ea1n",rules:[{required:!0,message:"Thi\u1ebfu ng\xe0y h\u1ebft h\u1ea1n"},function(){return{validator:function(e,t){return F()(t).isAfter(F()())?Promise.resolve():Promise.reject("Ng\xe0y h\u1ebft h\u1ea1n ph\u1ea3i l\u1edbn h\u01a1n th\u1eddi gian hi\u1ec7n t\u1ea1i")}}}],children:Object(a.jsx)(he.a,{format:"DD/MM/YYYY"})})]})})},Ce=n(111);var Ie=[{path:"/post-manager",name:"Post manager",strict:!0,component:function(){var e=function(){le(!0),Z.get("/post").then((function(e){u(e.data)})).catch(ee).finally((function(){le(!1)}))};Object(c.useEffect)((function(){Z.get("/category").then((function(e){s(e.data)})),e(),Z.get("/analytics").then((function(e){ne(e.data)})).catch(ee)}),[]);var t=Object(c.useState)([]),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)([]),o=Object(b.a)(i,2),l=o[0],u=o[1],d=Object(c.useState)(!1),Y=Object(b.a)(d,2),P=Y[0],G=Y[1],X=Object(c.useState)(!1),Q=Object(b.a)(X,2),R=Q[0],W=Q[1],J=Object(c.useState)({totalComment:0,totalPhoneNumber:0,totalPost:0,totalUsedPost:0,totalLeftPost:0}),$=Object(b.a)(J,2),te=$[0],ne=$[1],se=Object(c.useState)(!1),ie=Object(b.a)(se,2),oe=ie[0],le=ie[1],je=[{title:"Qu\xe9t l\u1ea7n cu\u1ed1i",dataIndex:"lastScanCommentAt",key:"lastScanCommentAt",width:"100px",sorter:function(e,t){return F()(e.lastScanCommentAt).unix()-F()(t.lastScanCommentAt).unix()},render:function(e){return F()(e).format("DD/MM/YYYY \n HH:mm ")}},Object(h.a)(Object(h.a)({title:"Post",dataIndex:"content",key:"content",width:"300px"},ae(["postId","category.name","note","content.content"])),{},{render:function(e,t){return Object(a.jsxs)("div",{children:[N.a.get(e,"pictures.0")?Object(a.jsx)("img",{src:e.pictures[0],width:100,alt:"image "}):Object(a.jsx)(a.Fragment,{})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"ID Post: "})," ",Object(a.jsx)("a",{href:"https://fb.com/".concat(t.postId),target:"_blank",rel:"noreferrer",children:t.postId})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Chuy\xean m\u1ee5c: "})," ",Object(a.jsx)("a",{href:"https://fb.com/".concat(t.postId),target:"_blank",rel:"noreferrer",children:N.a.get(t,"category.name","Kh\xf4ng c\xf3")})," ",Object(a.jsx)("br",{}),Object(a.jsx)("b",{children:"Ghi ch\xfa: "})," ",t.note," ",Object(a.jsx)("br",{})," ",Object(a.jsx)("br",{})]})}}),{title:"Comments",dataIndex:"comments",key:"comments",width:"5%",sorter:function(e,t){return e.comments-t.comments},render:function(e,t){return Object(a.jsx)(U.a,{color:"magenta",children:e.length})}},{title:"Phone",dataIndex:"comments",key:"comments",width:"5%",sorter:function(e,t){return e.comments-t.comments},render:function(e,t){var n=N.a.sumBy(e,(function(e){var t=N.a.get(e,"from.mobile_phone")?1:0;return N.a.get(e,"contents.phoneNumbers.length",0)+t}));return Object(a.jsx)(U.a,{color:"magenta",children:n})}},{title:"Bi\u1ec3u \u0111\u1ed3",dataIndex:"comments",key:"comments",width:"350px",render:function(e,t){for(var n=[],c=0;c<7;c++)n.push({day:F()().subtract(c,"day").format("DD/MM"),type:"comment",count:0});for(var r=0;r<7;r++)n.push({day:F()().subtract(r,"day").format("DD/MM"),type:"phone",count:0});var s,i=Object(m.a)(e);try{for(i.s();!(s=i.n()).done;){var o=s.value;if(F()(o.createdTime).isBefore(F()().subtract(7,"days")))break;var l=N.a.find(n,{day:F()(o.createdTime).format("DD/MM"),type:"comment"});l&&l.count++;var j=N.a.find(n,{day:F()(o.createdTime).format("DD/MM"),type:"phone"}),u=N.a.get(o,"from.mobile_phone")?1:0;l&&(j.count+=N.a.get(o,"contents.phoneNumbers.length",0)+u)}}catch(d){i.e(d)}finally{i.f()}return Object(a.jsxs)(M.Chart,{height:250,width:350,autoFit:!0,data:n.reverse(),interactions:["element-active"],children:[Object(a.jsx)(M.Interval,{adjust:[{type:"dodge"}],color:"type",position:"day*count"}),Object(a.jsx)(q.a,{shared:!0})]})}},{title:"H\xe0nh \u0111\u1ed9ng",dataIndex:"_id",key:"_id",width:100,fixed:"right",render:function(e,t){return Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column",height:100},children:[Object(a.jsx)(j.a,{style:{backgroundColor:"#2ecc71",color:"white"},shape:"round",icon:Object(a.jsx)(v.a,{}),size:"small",children:Object(a.jsx)(K,{typeExport:"full_csv",countExport:t.comments.length,comments:t.comments})}),Object(a.jsx)(j.a,{type:"primary",shape:"round",icon:Object(a.jsx)(k.a,{}),size:"small",children:Object(a.jsxs)(ce.b,{to:"/comment/"+e,style:{color:"white"},children:[" ","Xem"]})}),Object(a.jsx)(H.a,{defaultChecked:"active"===t.status,unCheckedChildren:"OFF",checkedChildren:"ON",style:{width:"100%"},onChange:function(e){return function(e,t){le(!0);var n=e?"active":"deactive";Z.put("/post/".concat(t,"/").concat(n)).then((function(e){A.a.success({message:"\u0110\xe3 c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i !"})})).catch((function(e){return ee(e)})).finally((function(){le(!1)}))}(e,t._id)}}),Object(a.jsx)(L.a,{title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a \uff1f",okText:"X\xf3a",cancelText:"H\u1ee7y",onConfirm:function(){return t=e,void Z.delete("/post/".concat(t)).then((function(){A.a.success({message:"\u0110\xe3 x\xf3a !"});var e=N.a.remove(l,(function(e){return!N.a.isEqual(e._id,t)}));u(e)})).catch((function(e){return ee(e)}));var t},children:Object(a.jsx)(j.a,{type:"danger",shape:"round",icon:Object(a.jsx)(T.a,{}),size:"small",children:"X\xf3a"})})]})}}];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x.a,{className:"site-page-header",title:"Qu\u1ea3n l\xfd b\xe0i vi\u1ebft",subTitle:Object(a.jsx)(q.a,{title:"Th\xeam danh m\u1ee5c m\u1edbi",children:Object(a.jsx)(j.a,{type:"primary",shape:"circle",icon:Object(a.jsx)(C.a,{}),onClick:function(){return W(!0)}})})}),Object(a.jsxs)(O.a,{gutter:16,children:[Object(a.jsx)(f.a,{span:6,xs:24,xl:4,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(p.a,{title:"T\u1ed5ng s\u1ed1 post",value:te.totalPost,valueStyle:{color:"#3f8600"},prefix:Object(a.jsx)(I.a,{})})})}),Object(a.jsx)(f.a,{span:6,xs:24,xl:4,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(p.a,{title:"S\u1ed1 Post \u0111\xe3 d\xf9ng",value:te.totalUsedPost,valueStyle:{color:"#26de81"},prefix:Object(a.jsx)(w.a,{})})})}),Object(a.jsx)(f.a,{span:6,xs:24,xl:4,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(p.a,{title:"S\u1ed1 Post c\xf2n l\u1ea1i",value:te.totalLeftPost,valueStyle:{color:"#26de11"},prefix:Object(a.jsx)(w.a,{})})})}),Object(a.jsx)(f.a,{span:6,xs:24,xl:4,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(p.a,{title:"S\u1ed1 b\xecnh lu\u1eadn",value:te.totalComment,valueStyle:{color:"#9c88ff"},prefix:Object(a.jsx)(S.a,{})})})}),Object(a.jsx)(f.a,{span:6,xs:24,xl:4,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(p.a,{title:"T\u1ed5ng s\u1ed1 phone",value:te.totalPhoneNumber,valueStyle:{color:"#44bd32"},prefix:Object(a.jsx)(D.a,{})})})})]}),Object(a.jsx)("br",{}),Object(a.jsx)(O.a,{children:Object(a.jsx)(f.a,{span:24,children:Object(a.jsx)(V.a,{dataSource:l,columns:je,scroll:{x:100},loading:oe,pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"]}})})}),Object(a.jsx)(y.a,{title:"Th\xeam b\xe0i vi\u1ebft",visible:R,confirmLoading:P,onCancel:function(){return W(!1)},footer:[Object(a.jsx)(j.a,{onClick:function(){return W(!1)},children:"\u0110\xf3ng"},"back"),Object(a.jsx)(j.a,{form:"formCreatePost",type:"primary",htmlType:"submit",disabled:P,children:P?Object(a.jsxs)("p",{children:[Object(a.jsx)(_.a,{spin:!0})," Vui l\xf2ng \u0111\u1ee3i..."]}):"Th\xeam b\xe0i vi\u1ebft"})],children:Object(a.jsxs)(B.a,{layout:"vertical",id:"formCreatePost",name:"basic",initialValues:{remember:!0},onFinish:function(t){G(!0),Z.post("/post",t).then((function(){A.a.success({message:"\u0110\xe3 th\xeam b\xe0i vi\u1ebft"}),e()})).catch(ee).finally((function(){G(!1)}))},children:[Object(a.jsx)(B.a.Item,{name:"postId",label:"Link b\xe0i vi\u1ebft c\u1ea7n qu\xe9t comment",rules:[{required:!0,message:"Vui l\xf2ng \u0111i\u1ec1n link b\xe0i vi\u1ebft"}],children:Object(a.jsx)(z.a,{placeholder:"https://www.facebook.com/nguyentri729/posts/843229586221364:0"})}),Object(a.jsx)(B.a.Item,{label:"Ghi ch\xfa",name:"note",children:Object(a.jsx)(z.a,{placeholder:"Ghi ch\xfa"})}),Object(a.jsx)(B.a.Item,{name:"category",label:"Chuy\xean m\u1ee5c",children:Object(a.jsx)(E.a,{placeholder:"Ch\u1ecdn danh m\u1ee5c b\xean d\u01b0\u1edbi",allowClear:!0,children:r.map((function(e){return Object(a.jsx)(re,{value:e._id,children:e.name})}))})})]})})]})}},{path:"/category-manager",name:"category manager",strict:!0,component:function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x.a,{className:"site-page-header",title:"Qu\u1ea3n l\xfd danh m\u1ee5c",subTitle:Object(a.jsx)(q.a,{title:"Th\xeam danh m\u1ee5c m\u1edbi",children:Object(a.jsx)(j.a,{type:"primary",shape:"circle",icon:Object(a.jsx)(C.a,{}),onClick:function(){return r(!0)}})})}),Object(a.jsx)(ie,{isShowModal:n,setShowModal:r}),Object(a.jsx)(oe,{})]})}},{path:"/comment-manager",name:"Comment manager",strict:!1,component:ye},{path:"/comment-manager",name:"Comment manager",component:ye},{path:"/comment/:postId",name:"Comment",component:ye},{path:"/user-manager",name:"User manager",strict:!0,component:Object(Ce.b)((function(e,t){return{me:e.user}}))((function(e){var t=e.me,n=B.a.useForm(),r=Object(b.a)(n,1)[0],s=Object(c.useState)([]),i=Object(b.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)(!1),d=Object(b.a)(u,2),m=d[0],h=d[1],O=Object(c.useState)(!1),f=Object(b.a)(O,2),g=f[0],p=f[1],v=Object(c.useState)(!1),k=Object(b.a)(v,2),I=k[0],w=k[1],S=Object(c.useState)({}),D=Object(b.a)(S,2),M=D[0],Y=D[1],P=function(){Z.get("/user").then((function(e){l(e.data)})).catch(ee)};Object(c.useEffect)((function(){P()}),[]);var E=[{title:"Th\u1eddi gian t\u1ea1o",dataIndex:"createdAt",key:"createdAt",sorter:function(e,t){return F()(e.createdAt).unix()-F()(t.createdAt).unix()},render:function(e){return F()(e).format("DD/MM/YYYY \n HH:mm ")}},{title:"Email",dataIndex:"username",key:"username"},{title:"T\xean ",dataIndex:"fullName",key:"fullName"},{title:"Gi\u1edbi h\u1ea1n post",dataIndex:"limitPost",key:"limitPost"},{title:"Roles",dataIndex:"roles",key:"roles",render:function(e){return Object(a.jsx)(a.Fragment,{children:N.a.map(e.sort(),(function(e){var t;switch(e){case"admin":t="gold";break;case"user":t="green";break;default:t="geekblue"}return Object(a.jsx)(U.a,{color:t,children:e})}))})}},{title:"Th\u1eddi gian h\u1ebft h\u1ea1n",dataIndex:"expiresDate",key:"expiresDate",sorter:function(e,t){return F()(e.expiresDate).unix()-F()(t.expiresDate).unix()},render:function(e){return F()(e).format("DD/MM/YYYY ")}},{title:"H\xe0nh \u0111\u1ed9ng",dataIndex:"_id",key:"_id",render:function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{type:"primary",size:"small",shape:"round",icon:Object(a.jsx)(ve.a,{}),onClick:function(){w(!0),Y(t)},children:"S\u1eeda"}),Object(a.jsx)(L.a,{title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a \uff1f",okText:"X\xf3a",cancelText:"H\u1ee7y",onConfirm:function(){return t=e,void Z.delete("/user/".concat(t)).then((function(){A.a.success({message:"\u0110\xe3 x\xf3a !"});var e=N.a.remove(o,(function(e){return!N.a.isEqual(e._id,t)}));l(e)})).catch((function(e){return ee(e)}));var t},children:Object(a.jsx)(j.a,{type:"danger",size:"small",shape:"round",icon:Object(a.jsx)(T.a,{}),children:"X\xf3a"})})]})}}];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x.a,{className:"site-page-header",title:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng",subTitle:Object(a.jsx)(q.a,{title:"Th\xeam ng\u01b0\u1eddi d\xf9ng",children:Object(a.jsx)(j.a,{type:"primary",shape:"circle",icon:Object(a.jsx)(C.a,{}),onClick:function(){return h(!0)}})})}),Object(a.jsx)(V.a,{columns:E,dataSource:o}),Object(a.jsx)(Te,{isShow:I,user:M,setShow:w,getUsers:P,me:t}),Object(a.jsx)(y.a,{title:"Th\xeam ng\u01b0\u1eddi d\xf9ng",visible:m,confirmLoading:g,onCancel:function(){return h(!1)},footer:[Object(a.jsx)(j.a,{onClick:function(){return h(!1)},children:"\u0110\xf3ng"},"back"),Object(a.jsx)(j.a,{form:"formCreateUser",type:"primary",htmlType:"submit",disabled:g,children:g?Object(a.jsxs)("p",{children:[Object(a.jsx)(_.a,{spin:!0})," Vui l\xf2ng \u0111\u1ee3i..."]}):"Th\xeam"})],children:Object(a.jsxs)(B.a,{layout:"vertical",id:"formCreateUser",name:"basic",initialValues:{remember:!0},onFinish:function(e){p(!0),Z.post("/user/create",e).then((function(){A.a.success({message:"\u0110\xe3 t\u1ea1o ng\u01b0\u1eddi d\xf9ng"})})).catch(ee).finally((function(){r.resetFields(),p(!1),setTimeout((function(){return h(!1)}),500)}))},children:[Object(a.jsx)(B.a.Item,{name:"username",label:"Email \u0111\u0103ng nh\u1eadp",rules:[{type:"email",message:"Vui l\xf2ng \u0111i\u1ec1n email"},{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"}],children:Object(a.jsx)(z.a,{placeholde:"Username"})}),Object(a.jsx)(B.a.Item,{name:"password",label:"M\u1eadt kh\u1ea9u",rules:[{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"}],children:Object(a.jsx)(z.a.Password,{placeholde:"M\u1eadt kh\u1ea9u"})}),Object(a.jsx)(B.a.Item,{name:"fullName",label:"T\xean \u0111\u1ea7y \u0111\u1ee7",rules:[{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"}],children:Object(a.jsx)(z.a,{placeholde:"T\xean \u0111\u1ea7y \u0111\u1ee7"})}),Object(a.jsx)(B.a.Item,{name:"limitPost",label:"Gi\u1edbi h\u1ea1n post",rules:[{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"},function(){return{validator:function(e,t){return!t||t<5?Promise.reject("Gi\u1edbi h\u1ea1n post ph\u1ea3i l\u1edbn h\u01a1n 5 b\xe0i. "):Promise.resolve()}}}],children:Object(a.jsx)(fe.a,{placeholde:"Gi\u1edbi h\u1ea1n post"})}),Object(a.jsx)(B.a.Item,{name:"roles",label:"Quy\u1ec1n",rules:[{required:!0,message:"Ko \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng tr\u01b0\u1eddng n\xe0y !"}],children:Object(a.jsx)(ke.a.Group,{children:N.a.get(t,"roles",[]).includes("admin")?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ke.a,{value:"super-user",children:"Super User"}),Object(a.jsx)(ke.a,{value:"admin",children:"Admin"}),Object(a.jsx)(ke.a,{value:"user",defaultChecked:!0,children:"Normal User"})]}):Object(a.jsx)(ke.a,{value:"user",checked:!0,children:"Normal User"})})}),Object(a.jsx)(B.a.Item,{name:"expiresDate",label:"Ng\xe0y h\u1ebft h\u1ea1n",rules:[{required:!0,message:"Thi\u1ebfu ng\xe0y h\u1ebft h\u1ea1n"},function(){return{validator:function(e,t){return F()(t).isAfter(F()())?Promise.resolve():Promise.reject("Ng\xe0y h\u1ebft h\u1ea1n ph\u1ea3i l\u1edbn h\u01a1n th\u1eddi gian hi\u1ec7n t\u1ea1i")}}}],children:Object(a.jsx)(he.a,{format:"DD/MM/YYYY"})}),Object(a.jsx)(B.a.Item,{name:"active",label:"Tr\u1ea1ng th\xe1i",children:Object(a.jsx)(H.a,{defaultChecked:!0})})]})})]})}))},{path:"/token-manager",name:"Token manager",strict:!0,component:function(){var e=function(){Z.get("/tokens").then((function(e){M(e.data)})).catch(ee)};Object(c.useEffect)((function(){e()}),[]);var t=Object(c.useState)(!1),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(!1),o=Object(b.a)(i,2),l=o[0],u=o[1],d=Object(c.useState)(!1),m=Object(b.a)(d,2),h=m[0],v=m[1],k=Object(c.useState)([]),T=Object(b.a)(k,2),D=T[0],M=T[1],Y=N.a.groupBy(D,"status"),P=[{title:"Th\u1eddi gian t\u1ea1o",dataIndex:"createdAt",key:"createdAt",sorter:function(e,t){return F()(e.createdAt).unix()-F()(t.createdAt).unix()},render:function(e){return F()(e).format("DD/MM/YYYY \n HH:mm ")}},{title:"UID",dataIndex:"uid",sorter:function(e,t){return e.uid.localeCompare(t.uid)},key:"uid"},{title:"T\xean",sorter:function(e,t){return e.name.localeCompare(t.name)},dataIndex:"name",key:"name"},{title:"Token",dataIndex:"accessToken",key:"accessToken",render:function(e){return Object(a.jsx)(z.a.TextArea,{value:e})}},{title:"Status",dataIndex:"status",key:"status",sorter:function(e,t){return e.status.localeCompare(t.status)},render:function(e){return Object(a.jsx)(a.Fragment,{children:"live"===e?Object(a.jsx)(U.a,{color:"geekblue",children:"Live"}):Object(a.jsx)(U.a,{color:"red",children:"Die"})})}}];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x.a,{className:"site-page-header",title:"Qu\u1ea3n l\xfd token",subTitle:Object(a.jsx)(q.a,{title:"Th\xeam token m\u1edbi",children:Object(a.jsx)(j.a,{type:"primary",shape:"circle",icon:Object(a.jsx)(C.a,{}),onClick:function(){return u(!0)}})})}),Object(a.jsxs)(O.a,{gutter:16,children:[Object(a.jsx)(f.a,{span:9,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(p.a,{title:"T\u1ed5ng token",value:N.a.get(D,"length",0),valueStyle:{color:"#3f8600"},prefix:Object(a.jsx)(I.a,{})})})}),Object(a.jsx)(f.a,{span:9,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(p.a,{title:"Token live",value:N.a.get(Y,"live.length",0),valueStyle:{color:"#26de81"},prefix:Object(a.jsx)(w.a,{})})})}),Object(a.jsx)(f.a,{span:6,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(p.a,{title:"Token die",value:N.a.get(Y,"die.length",0),valueStyle:{color:"#red"},prefix:Object(a.jsx)(S.a,{})})})})]}),Object(a.jsx)("br",{}),Object(a.jsxs)(j.a,{type:"primary",style:{marginBottom:"20px",float:"right"},icon:Object(a.jsx)(je.a,{spin:h}),disabled:h,onClick:function(){v(!0),Z.get("/token/check").then((function(t){A.a.success({message:"\u0110\xe3 l\xe0m m\u1edbi token th\xe0nh c\xf4ng !"}),e()})).catch(ee).finally((function(){v(!1)}))},children:[" ",h?"\u0110ang l\xe0m m\u1edbi...":"L\xe0m m\u1edbi danh s\xe1ch"]}),Object(a.jsx)("br",{}),Object(a.jsx)(V.a,{columns:P,dataSource:D}),Object(a.jsx)(y.a,{title:"Th\xeam token m\u1edbi",visible:l,confirmLoading:r,onCancel:function(){return u(!1)},footer:[Object(a.jsx)(j.a,{onClick:function(){return u(!1)},children:"\u0110\xf3ng"},"back"),Object(a.jsx)(j.a,{form:"formAddToken",type:"primary",htmlType:"submit",disabled:r,children:r?Object(a.jsxs)("p",{children:[Object(a.jsx)(_.a,{spin:!0})," Vui l\xf2ng \u0111\u1ee3i..."]}):"Th\xeam"})],children:Object(a.jsx)(B.a,{layout:"vertical",id:"formAddToken",name:"basic",initialValues:{remember:!0},onFinish:function(t){s(!0);var n=t.tokens;Z.post("/token/add",t).then((function(t){A.a.success({message:"\u0110\xe3 th\xeam th\xe0nh c\xf4ng ".concat(t.data.length," / ").concat(n.split("\n").length)}),e()})).catch(ee).finally((function(){s(!1)}))},children:Object(a.jsx)(B.a.Item,{label:"Danh s\xe1ch token",name:"tokens",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp list access_token"}],children:Object(a.jsx)(z.a.TextArea,{placeholder:"M\u1ed7i token c\xe1ch nhau b\u1eb1ng d\u1ea5u xu\u1ed1ng d\xf2ng",rows:6})})})})]})}},{path:"/search-posts",name:"Search post",strict:!0,component:function(){return Object(a.jsxs)(O.a,{children:[Object(a.jsxs)(f.a,{span:20,children:[Object(a.jsx)(z.a,{type:"text",placeholder:"Nh\u1eadp t\u1eeb kh\xf3a c\u1ea7n t\xecm ki\u1ebfm..."}),Object(a.jsx)(he.a.RangePicker,{style:{width:"100%",marginTop:20}})]}),Object(a.jsx)(f.a,{span:4,children:Object(a.jsx)(j.a,{type:"primary",style:{height:"50px",marginLeft:"20px"},children:"T\xecm ki\u1ebfm"})}),Object(a.jsx)(f.a,{span:24,style:{marginTop:50},children:Object(a.jsxs)(g.a,{style:{width:300},cover:Object(a.jsx)("img",{alt:"example",src:"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"}),children:[Object(a.jsx)(g.a.Meta,{avatar:Object(a.jsx)(l.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:"Card title",description:"This is the description"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"created at: "}),Object(a.jsx)("span",{children:"created at: "}),Object(a.jsx)("span",{children:"created at: "})]})]})})]})}}],we={UPDATE_USER_INFO:"UPDATE_USER_INFO",LOGOUT:"LOGOUT",SIGN_IN:"SIGN_IN"},Se=function(e){return{type:we.UPDATE_USER_INFO,data:e}},De=n(466),_e=n(465),Me=n(464),Ye=n(463),Fe=[{type:"sub-menu",key:"scan-comments",name:"Qu\xe9t b\xecnh lu\u1eadn \u1ea9n",icon:Object(a.jsx)(De.a,{}),roles:["user","super-user","admin"],subMenus:[{path:"/post-manager",name:"B\xe0i vi\u1ebft",icon:Object(a.jsx)(De.a,{}),roles:["user","super-user","admin"]},{path:"/comment-manager",name:"B\xecnh lu\u1eadn",icon:Object(a.jsx)(S.a,{}),roles:["user","super-user","admin"]},{path:"/category-manager",name:"Danh m\u1ee5c",icon:Object(a.jsx)(_e.a,{}),roles:["user","super-user","admin"]}]},{path:"/user-manager",type:"menu-item",name:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng",icon:Object(a.jsx)(Me.a,{}),roles:["admin","super-user"]},{path:"/token-manager",type:"menu-item",name:"Qu\u1ea3n l\xfd token",icon:Object(a.jsx)(Ye.a,{}),roles:["admin"]}],Pe=o.a.Header,Ne=o.a.Content,Ee=o.a.Sider,Ae=o.a.Footer;var Ue=Object(Ce.b)((function(e,t){return{user:e.user}}),(function(e){return{updateUserInfo:function(t){e(Se(t))}}}))((function(e){var t=e.user,n=e.updateUserInfo,r=Object(se.f)();localStorage.getItem("access_token")||r.push("/login"),Object(c.useEffect)((function(){Z.get("/user/me").then((function(e){n(e.data)}))}),[]);var s=Object(se.g)().pathname,i=N.a.find(Fe,(function(e){if("sub-menu"===e.type)return!!N.a.find(e.subMenus,(function(e){return e.path===s}))}));return Object(a.jsxs)(o.a,{children:[Object(a.jsxs)(Ee,{breakpoint:"lg",collapsedWidth:"0",theme:"light",children:[Object(a.jsx)("div",{className:"logo",children:Object(a.jsxs)("h3",{style:{fontWeight:"bold",color:"#1890ff"},children:[Object(a.jsx)("svg",{style:{fill:"#1890ff"},xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",color:"#1890ff",viewBox:"0 0 24 24",children:Object(a.jsx)("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})," HOTDATAFB.COM"]})}),Object(a.jsxs)("div",{style:{marginLeft:10,display:"flex",flexDirection:"row",backgroundColor:"#dff9fb",padding:10},children:[Object(a.jsx)(l.a,{size:"large",icon:Object(a.jsx)(d.a,{})}),Object(a.jsxs)("div",{className:"user-info",style:{marginLeft:25},children:[Object(a.jsx)("span",{children:N.a.get(t,"username","unkown")}),"  ",Object(a.jsx)("br",{}),Object(a.jsxs)("small",{children:["HSD: ",Object(a.jsx)("b",{children:F()(t.expiresDate).format("DD/MM/YYYY")})]}),"  ",Object(a.jsx)("br",{}),Object(a.jsx)(j.a,{type:"link",style:{marginTop:"-28px",marginLeft:"-15px",fontSize:13},onClick:function(){localStorage.clear(),window.location="/login"},children:"\u0110\u0103ng xu\u1ea5t"})]})]}),Object(a.jsx)(u.a,{theme:"light",mode:"inline",defaultSelectedKeys:[s],defaultOpenKeys:[N.a.get(i,"key","")],children:Fe.map((function(e,n){return"sub-menu"===e.type?Object(a.jsx)(u.a.SubMenu,{icon:e.icon,title:e.name,children:N.a.map(e.subMenus,(function(e){if(N.a.intersection(e.roles,t.roles).length>0)return Object(a.jsx)(u.a.Item,{icon:e.icon,isSelected:!0,children:Object(a.jsx)(ce.b,{to:e.path,children:e.name})},e.path)}))},e.key):N.a.intersection(e.roles,t.roles).length>0?Object(a.jsx)(u.a.Item,{icon:e.icon,isSelected:!0,children:Object(a.jsx)(ce.b,{to:e.path,children:e.name})},e.path):void 0}))})]}),Object(a.jsxs)(o.a,{children:[Object(a.jsx)(Pe,{className:"site-layout-sub-header-background",style:{padding:0}}),Object(a.jsx)(Ne,{style:{margin:"24px 16px 0",minHeight:"750px"},children:Object(a.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:Object(a.jsx)(se.c,{children:Ie.map((function(e){return Object(a.jsx)(se.a,{path:e.path,component:e.component})}))})})}),Object(a.jsx)(Ae,{style:{textAlign:"center"}})]})]})}));function qe(){var e=Object(se.f)();localStorage.getItem("access_token")&&e.push("/comment-manager");var t=Object(c.useState)(!1),n=Object(b.a)(t,2),r=n[0],s=n[1];return Object(a.jsx)(O.a,{children:Object(a.jsx)(f.a,{span:12,offset:6,style:{marginTop:"5%"},children:Object(a.jsx)(g.a,{bordered:!0,children:Object(a.jsxs)(B.a,{layout:"vertical",name:"basic",initialValues:{remember:!0},onFinish:function(t){var n=t.username,a=t.password;s(!0),Z.post("/login",{username:n,password:a}).then((function(t){var n=t.data,a=n.accessToken,c=n.refreshToken;a&&c&&(localStorage.setItem("access_token",a),localStorage.setItem("refresh_token",c),A.a.success({message:"\u0110\u0103ng nh\u1eadp th\xe0nh c\xf4ng"}),e.push("/comment-manager"))})).catch((function(e){A.a.error({message:"\u0110\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i",description:N.a.get(e,"response.data.msg",e.message)})})).finally((function(){s(!1)}))},children:[Object(a.jsx)("center",{children:Object(a.jsxs)("h1",{style:{fontWeight:"bold",color:"#1890ff"},children:[Object(a.jsx)("svg",{style:{fill:"#1890ff"},xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24",children:Object(a.jsx)("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})," ","HOTDATAFB.COM"]})}),Object(a.jsx)(B.a.Item,{label:"T\xean \u0111\u0103ng nh\u1eadp",name:"username",rules:[{required:!0,message:"Vui l\xf2ng \u0111i\u1ec1n t\xean \u0111\u0103ng nh\u1eadp"}],children:Object(a.jsx)(z.a,{})}),Object(a.jsx)(B.a.Item,{label:"M\u1eadt kh\u1ea9u",name:"password",rules:[{required:!0,message:"Vui l\xf2ng \u0111i\u1ec1n m\u1eadt kh\u1ea9u"}],children:Object(a.jsx)(z.a.Password,{})}),Object(a.jsx)(B.a.Item,Object(h.a)(Object(h.a)({},He),{},{name:"remember",valuePropName:"checked",children:Object(a.jsx)(ke.a,{children:"Nh\u1edb \u0111\u0103ng nh\u1eadp"})})),Object(a.jsx)(B.a.Item,Object(h.a)(Object(h.a)({},He),{},{children:Object(a.jsx)(j.a,{type:"primary",htmlType:"submit",loading:r,children:"\u0110\u0103ng nh\u1eadp"})}))]})})})})}var He={wrapperCol:{offset:8,span:16}};function Le(){var e=Object(se.g)();return Object(a.jsx)(a.Fragment,{children:"/login"===e.pathname?Object(a.jsx)(qe,{}):Object(a.jsx)(Ue,{})})}var Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,470)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},Be=n(110),ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case we.UPDATE_USER_INFO:e=t.data}return e},Ge=Object(Be.b)({user:ze}),Ke=Object(Be.c)(Ge);i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Ce.a,{store:Ke,children:Object(a.jsx)(ce.a,{children:Object(a.jsx)(Le,{})})})}),document.getElementById("root")),Ve()}},[[434,1,2]]]);
//# sourceMappingURL=main.375fcd8a.chunk.js.map